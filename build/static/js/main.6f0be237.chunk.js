(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n.p+"static/media/Jennifer_banner.ff0209f6.png"},17:function(e,t,n){e.exports=n(42)},23:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),l=(n(23),n(2)),o=n(16),s=n.n(o),u=n(3),m=n(4),g=n.n(m),f={getAll:function(){var e={id:1e4,read:!1,lyrics:[],name:"not a song"};return g.a.get("/songs").then(function(t){return Object(u.a)({},t,{data:t.data.concat(e)})})},create:function(e){return g.a.post("/songs",e)},update:function(e,t){return g.a.put("".concat("/songs","/").concat(e),t)}},p=function(e){var t,n=Object(a.useState)("none"),c=Object(l.a)(n,2),i=c[0],o=c[1],s=(t=e.lyrics).map(function(e){if(void 0===e.text){var n=t.find(function(t){return t.type===e.type});return n.text?Object(u.a)({},e,{text:n.text}):Object(u.a)({},e,{text:"..."})}return e}),m=e.read?"Songs-read":"Songs-unread",g={display:i},f=e.read?"merkitse lukemattomaksi":"merkitse luetuksi";return r.a.createElement("div",{className:"Songs-song",onClick:function(e){e.stopPropagation(),o("none"!==i?"none":"block")}},r.a.createElement("h3",{className:m},e.name),r.a.createElement("button",{onClick:e.toggleImportance},f),r.a.createElement("div",{style:g},s.map(function(e,t){var n=function(e){return e.text.split("\n").map(function(e,t){return r.a.createElement("p",{key:t},e)})}(e);return r.a.createElement("div",{className:"Songs-"+e.type,key:t},n)})))},d=function(e){return r.a.createElement("div",{className:"Songs-songs"},e.songs.map(function(t){return r.a.createElement(p,{key:t.id,name:t.name,lyrics:t.lyrics,read:t.read,toggleImportance:function(n){return function(t,n){t.stopPropagation();var a=e.songs.find(function(e){return e.id===n}),r=Object(u.a)({},a,{read:!a.read});f.update(n,r).then(function(t){e.setSongs(e.songs.map(function(e){return e.id!==n?e:t.data}))}).catch(function(t){e.setErrorMessage("t\xe4t\xe4 biisi\xe4 ei ole en\xe4\xe4 palvelimella '".concat(a.name,"'")),setTimeout(function(){e.setErrorMessage(null)},5e3),e.setSongs(e.songs.filter(function(e){return e.id!==n}))})}(n,t.id)}})}))},E=function(e){var t=e.images,n=e.alt;return t.map(function(e,t){return r.a.createElement("img",{className:"Gigs-img",src:e,alt:n+t,key:t})})},v=function(e){var t=e.date,n=e.place,c=e.playlist,i=e.images,o=Object(a.useState)("none"),s=Object(l.a)(o,2),u=s[0],m=s[1],g={display:u};return r.a.createElement("div",{className:"Gigs-gig",onClick:function(e){e.stopPropagation(),m("none"!==u?"none":"block")}},r.a.createElement("h3",null,t," @ ",n," "),r.a.createElement("div",{style:g},r.a.createElement("h4",null,"Biisilista"),r.a.createElement("ol",null,c.map(function(e,t){return r.a.createElement("li",{className:"Gigs-song",key:t},e)})),r.a.createElement("h4",null,"Kuvia keikalta"),r.a.createElement("div",{className:"Gigs-images-container"},r.a.createElement(E,{images:i,alt:n}))))},b=function(e){var t=Object(a.useState)(!0),n=Object(l.a)(t,2),c=n[0],i=n[1],o=c?e.gigs:e.gigs.filter(function(e){return function(e){var t=new Date;console.log(t,e);var n=e.split("."),a=new Date(n[2],n[1]-1,n[0],0,0,0);return t.getTime()<a.getTime()}(e.date)});return console.log(o),r.a.createElement("div",{className:"Gigs"},r.a.createElement("button",{onClick:function(e){e.stopPropagation(),i(!c)}},c?"N\xe4yt\xe4 tulevat":"N\xe4yt\xe4 kaikki"),o.map(function(e){return r.a.createElement(v,{key:e.id,place:e.place,date:e.date,playlist:e.playlist,images:e.images})}))},k=function(e){var t=Object(a.useState)("none"),n=Object(l.a)(t,2),c=n[0],i=n[1],o={display:c};return r.a.createElement("div",{className:"Section",onClick:function(){i("none"!==c?"none":"block")}},r.a.createElement("h1",null,e.title),r.a.createElement("div",{style:o},e.component))},y=function(e){return r.a.createElement("div",{className:"Section"},r.a.createElement("h1",null,e.title),r.a.createElement("div",null,e.component))},h=n(5),j={getAll:function(){return g.a.get("/gigs")},create:function(e){return g.a.post("/gigs",e)},update:function(e,t){return g.a.put("".concat("/gigs","/").concat(e),t)}},O=function(e){var t=e.gigs,n=e.setGigs,c=Object(a.useState)({place:"",date:"",showtime:"",link:"",id:null,playlist:[],images:[]}),i=Object(l.a)(c,2),o=i[0],s=i[1],m=function(e,t){s(Object(u.a)({},o,Object(h.a)({},t,e.target.value)))};return r.a.createElement("div",{className:"NewGig"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=Object(u.a)({},o);j.create(a).then(function(e){n(t.concat(e.data)),s({place:"",date:"",showtime:"",link:"",id:null,playlist:[],images:[]})})}},"Keikkap\xe4iv\xe4: ",r.a.createElement("input",{onChange:function(e){return m(e,"date")},value:o.date})," ",r.a.createElement("br",null),"Paikka: ",r.a.createElement("input",{onChange:function(e){return m(e,"place")},value:o.place})," ",r.a.createElement("br",null),"Showtime: ",r.a.createElement("input",{onChange:function(e){return m(e,"showtime")},value:o.showtime})," ",r.a.createElement("br",null),"Linkki: ",r.a.createElement("input",{onChange:function(e){return m(e,"link")},value:o.link,size:30})," ",r.a.createElement("br",null),"Playlist: ",r.a.createElement("textarea",{onChange:function(e){return m(e,"playlist")},value:o.playlist,cols:"30",rows:"20"})," ",r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Lis\xe4\xe4")))};n(41);var w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),o=Object(l.a)(i,2),u=o[0],m=o[1],g=Object(a.useState)(null),p=Object(l.a)(g,2),E=p[0],v=p[1];return Object(a.useEffect)(function(){console.log("effect 1"),j.getAll().then(function(e){m(e.data)})},[]),Object(a.useEffect)(function(){console.log("effect 2"),f.getAll().then(function(e){c(e.data)})},[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:s.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"Tervetuloa Jenniferin sivuille!")),r.a.createElement("div",{className:"App-container"},r.a.createElement(function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},{message:E}),r.a.createElement(k,{title:"Jenniferin biisit",component:r.a.createElement(d,{songs:n,setSongs:c,setErrorMessage:v})}),r.a.createElement(k,{title:"Keikat",component:r.a.createElement(b,{gigs:u,setErrorMessage:v})}),r.a.createElement(y,{title:"Admin",component:r.a.createElement(O,{gigs:u,setGigs:m,setErrorMessage:v})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.6f0be237.chunk.js.map